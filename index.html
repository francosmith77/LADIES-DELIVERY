<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LADIS Delivery</title>
  <meta name="description" content="Carta digital con WhatsApp.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg:#0f1113; --panel:#15171b; --text:#fff; --muted:#cdd4df;
      --brand:#ffce0a; --border:rgba(255,255,255,.08);
    }
    body{ font-family:'Inter',system-ui; background:var(--bg); color:var(--text); }
    .panel{ background:var(--panel); border:1px solid var(--border); border-radius:18px; }
    .pill{ padding:.5rem .9rem; border-radius:999px; border:1px solid var(--border); color:var(--muted); }
    .pill.active{ background:#1a1c21; color:#fff; border-color:rgba(255,206,10,.35); }
    .btn{ background:var(--brand); color:#1a1200; font-weight:800; padding:.6rem 1rem; border-radius:12px; }
    .img-grad::after{ content:""; position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0)); }
    .badge{ font-size:.75rem; font-weight:700; padding:.25rem .5rem; border-radius:999px; background:rgba(0,0,0,.55); border:1px solid var(--border); }
    dialog{ background:var(--panel); color:var(--text); border:1px solid var(--border); border-radius:18px; }
    dialog::backdrop{ background:rgba(0,0,0,.6); }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="sticky top-0 z-40 backdrop-blur" style="background:rgba(15,17,19,.75); border-bottom:1px solid var(--border);">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <img src="img/logo-demo.jpeg" alt="LADIS" class="h-8 w-auto rounded">
        <strong>LADIS Delivery</strong>
      </div>
      <div class="hidden sm:flex items-center gap-2">
        <a href="#carta" class="pill active">Carta</a>
        <a href="#contacto" class="pill">Contacto</a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="relative">
    <img src="img/family-pizzas.jpg" alt="Hero" class="w-full h-[44vh] object-cover">
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="absolute inset-x-0 bottom-0 p-5">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-3xl sm:text-4xl font-extrabold drop-shadow">Carta</h1>
        <p class="text-white/90">¬øC√≥mo comprar? 1) Eleg√≠ una <b>familia</b> 2) Toc√° <b>Elegir</b> 3) Seleccion√° <b>variante y cantidad</b> 4) Confirm√° por <b>WhatsApp</b>.</p>
      </div>
    </div>
  </header>

  <!-- CATEGOR√çAS -->
  <nav class="sticky top-[56px] z-30" style="background:rgba(15,17,19,.85); border-bottom:1px solid var(--border);">
    <div class="max-w-6xl mx-auto px-4 py-2">
      <div class="flex gap-2 overflow-x-auto">
        <button class="pill active" data-cat="todo">Todo</button>
        <button class="pill" data-cat="pizzas">Pizzas</button>
        <button class="pill" data-cat="hamburguesas">Hamburguesas</button>
        <button class="pill" data-cat="empanadas">Empanadas</button>
        <button class="pill" data-cat="papas">Papas</button>
        <button class="pill" data-cat="calzone">Calzone</button>
        <button class="pill" data-cat="milanesas">Milanesas</button>
        <button class="pill" data-cat="bebidas">Bebidas</button>
      </div>
    </div>
  </nav>

  <!-- GRID -->
  <main id="carta" class="max-w-6xl mx-auto px-4 py-8 grid gap-5 sm:grid-cols-2 lg:grid-cols-3">

    <!-- CARD FAMILIA (ejemplos) -->
    <article class="panel overflow-hidden" data-family="pizzas" data-category="pizzas">
      <div class="relative h-56">
        <img src="img/family-pizzas.jpg" alt="Pizzas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">üçï Pizzas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Pizzas</h3>
            <p class="text-white/80 text-sm">Variantes desde $9.500</p>
          </div>
          <button class="btn" data-open="pizzas">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="hamburguesas" data-category="hamburguesas">
      <div class="relative h-56">
        <img src="img/family-hamburguesas.jpg" alt="Hamburguesas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">üçî Hamburguesas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Hamburguesas</h3>
            <p class="text-white/80 text-sm">Con papas</p>
          </div>
          <button class="btn" data-open="hamburguesas">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="empanadas" data-category="empanadas">
      <div class="relative h-56">
        <img src="img/family-empanadas.jpg" alt="Empanadas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">ü•ü Empanadas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Empanadas</h3>
            <p class="text-white/80 text-sm">Docena</p>
          </div>
          <button class="btn" data-open="empanadas">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="papas" data-category="papas">
      <div class="relative h-56">
        <img src="img/family-papas.jpg" alt="Papas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">üçü Papas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Papas</h3>
            <p class="text-white/80 text-sm">Cl√°sicas, gratinadas‚Ä¶</p>
          </div>
          <button class="btn" data-open="papas">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="calzone" data-category="calzone">
      <div class="relative h-56">
        <img src="img/family-calzone.jpg" alt="Calzone" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">ü•ñ Calzone</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Calzone</h3>
          </div>
          <button class="btn" data-open="calzone">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="milanesas" data-category="milanesas">
      <div class="relative h-56">
        <img src="img/family-milanesas.jpg" alt="Milanesas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">üçΩÔ∏è Milanesas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Milanesas</h3>
          </div>
          <button class="btn" data-open="milanesas">Elegir</button>
        </div>
      </div>
    </article>

    <article class="panel overflow-hidden" data-family="bebidas" data-category="bebidas">
      <div class="relative h-56">
        <img src="img/family-bebidas.jpg" alt="Bebidas" class="w-full h-full object-cover">
        <div class="img-grad absolute inset-0"></div>
        <div class="absolute top-3 left-3"><span class="badge">ü•§ Bebidas</span></div>
        <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
          <div>
            <h3 class="text-xl font-extrabold">Bebidas</h3>
          </div>
          <button class="btn" data-open="bebidas">Elegir</button>
        </div>
      </div>
    </article>

  </main>

  <!-- MODAL VARIANTES (con preview arriba) -->
  <dialog id="varModal" class="w-[95vw] max-w-2xl p-0">
    <form method="dialog" class="p-0">
      <div class="px-4 py-3 flex items-center justify-between border-b" style="border-color:var(--border);">
        <div>
          <h3 id="vmTitle" class="text-xl font-extrabold">Variante</h3>
          <p id="vmDesc" class="text-sm" style="color:var(--muted);">Seleccion√° y agreg√° al carrito</p>
        </div>
        <button class="pill" value="close">Cerrar</button>
      </div>

      <!-- ESTE ES EL RECUADRO QUE QUER√çAS CON IMAGEN -->
      <figure class="px-4 pt-4">
        <img id="vmImg" src="" alt="Vista del producto" class="w-full h-56 object-cover rounded-xl border" style="border-color:var(--border)">
        <figcaption id="vmAlt" class="text-xs mt-1" style="color:var(--muted);">Vista</figcaption>
      </figure>

      <div class="p-4 space-y-3">
        <div id="optList" class="space-y-2"></div>
        <div class="flex items-center justify-between pt-2">
          <div class="text-sm" style="color:var(--muted);">Cantidad</div>
          <div class="flex items-center gap-2">
            <button class="pill" type="button" id="qtyMinus">-</button>
            <span id="qty" class="w-6 text-center font-bold">1</span>
            <button class="pill" type="button" id="qtyPlus">+</button>
          </div>
        </div>
        <div class="flex items-center justify-end gap-2">
          <button class="pill" value="cancel">Cancelar</button>
          <button class="btn" id="addBtn" value="default">Agregar</button>
        </div>
      </div>
    </form>
  </dialog>

  <!-- STICKY CTA -->
  <div class="sticky bottom-0 z-40 border-t" style="background:rgba(15,17,19,.98); border-color:var(--border);">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <button class="pill">Ver carrito (<span id="cartCount">0</span>)</button>
      <a class="btn" id="goWA">Confirmar por WhatsApp</a>
    </div>
  </div>

  <footer id="contacto" class="max-w-6xl mx-auto px-4 py-10 text-center text-sm" style="color:var(--muted);">
    LADIS Delivery
  </footer>

  <script>
    // ========= DATA (familias con variantes) =========
    // Solo a modo de ejemplo m√≠nimo: complet√° con tus variantes reales.
    const MENU = {
      pizzas: {
        title: "Pizzas",
        desc: "Eleg√≠ la pizza",
        variants: [
          { name:"Muzzarella", price:9500 },
          { name:"Napolitana", price:10500 },
          { name:"Calabresa",  price:12500 },
          { name:"Fugazzeta", price:12000 }
        ]
      },
      hamburguesas:{
        title:"Hamburguesas con papas",
        desc:"Eleg√≠ tu hamburguesa",
        variants:[
          { name:"Jam√≥n y queso", price:8000 },
          { name:"Simple",        price:8500 },
          { name:"Completa",      price:9800 },
          { name:"Gigante",       price:12000 },
          { name:"Especial",      price:12000 }
        ]
      },
      empanadas:{
        title:"Empanadas (docena)",
        desc:"Eleg√≠ tu sabor",
        variants:[
          { name:"Carne",        price:13000 },
          { name:"Pollo",        price:13000 },
          { name:"Jam√≥n y queso",price:15000 },
          { name:"Humita",       price:15000 },
          { name:"Caprese",      price:13000 }
        ]
      },
      papas:{
        title:"Papas",
        desc:"Eleg√≠ tu versi√≥n",
        variants:[
          { name:"Fritas",          price:4500 },
          { name:"Gratinadas",      price:6000 },
          { name:"Ladis",           price:8000 },
          { name:"A caballo",       price:6000 }
        ]
      },
      calzone:{
        title:"Calzone",
        desc:"Eleg√≠ relleno",
        variants:[
          { name:"Jam√≥n y queso", price:8000 },
          { name:"Pollo",         price:8000 },
          { name:"Carne",         price:8000 }
        ]
      },
      milanesas:{
        title:"Milanesas",
        desc:"Eleg√≠ opci√≥n",
        variants:[
          { name:"Al plato Napolitana", price:12000 },
          { name:"S√°ndwich de milanesa", price:10000 }
        ]
      },
      bebidas:{
        title:"Bebidas",
        desc:"Eleg√≠ bebida",
        variants:[
          { name:"Coca-Cola 1.5L", price:3900 },
          { name:"Sprite 1.5L",    price:3900 },
          { name:"Pepsi 1.5L",     price:3000 },
          { name:"Quilmes 473ml",  price:2000 },
          { name:"Brahma 473ml",   price:2000 },
          { name:"Monster",        price:3500 },
          { name:"Speed",          price:2990 },
          { name:"Vino Cordero",   price:7000 },
          { name:"Agua Las Misiones", price:2000 }
        ]
      }
    };

    // ========= SELECTORES =========
    const varModal = document.getElementById('varModal');
    const vmTitle  = document.getElementById('vmTitle');
    const vmDesc   = document.getElementById('vmDesc');
    const vmImg    = document.getElementById('vmImg');
    const vmAlt    = document.getElementById('vmAlt');
    const optList  = document.getElementById('optList');
    const qtyEl    = document.getElementById('qty');
    const qtyMinus = document.getElementById('qtyMinus');
    const qtyPlus  = document.getElementById('qtyPlus');
    const addBtn   = document.getElementById('addBtn');

    // ========= HELPERS DE IMAGEN =========
    function slug(s){ return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); }
    function familyImgPath(family){ return `img/family-${family}.jpg`; }
    function variantImgPath(family, variant){ return `img/variants/${family}/${slug(variant)}.jpg`; }

    // Setea SIEMPRE una imagen visible (fallback = hero familia)
    function setVmImage(family, variantName){
      const fallback = familyImgPath(family);
      vmImg.onerror = null;                  // limpiar handlers anteriores
      vmImg.src = fallback;                  // mostrar algo YA
      vmAlt.textContent = variantName ? `${family} ‚Äì ${variantName}` : family;

      if(variantName){
        const trySrc = variantImgPath(family, variantName);
        vmImg.onerror = () => { vmImg.onerror = null; vmImg.src = fallback; };
        vmImg.src = trySrc;                  // intenta variante; si falla, vuelve al hero
      }
    }

    // ========= ABRIR MODAL DE UNA FAMILIA =========
    let currentFamily = null;
    let currentVariant = null;
    let currentQty = 1;

    document.querySelectorAll('[data-open]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const family = btn.getAttribute('data-open'); // pizzas, hamburguesas, etc.
        openVariants(family);
      });
    });

    function openVariants(family){
      currentFamily = family;
      currentQty = 1; qtyEl.textContent = '1';

      const data = MENU[family];
      if(!data) return;

      vmTitle.textContent = data.title;
      vmDesc.textContent  = data.desc;

      // Construir radios de variantes
      optList.innerHTML = '';
      data.variants.forEach((v, idx)=>{
        const id = `opt-${idx}`;
        const row = document.createElement('label');
        row.className = "panel w-full flex items-center justify-between px-3 py-3";
        row.htmlFor = id;
        row.innerHTML = `
          <div class="flex items-center gap-3">
            <input type="radio" id="${id}" name="variant" ${idx===0?'checked':''} class="accent-yellow-400">
            <div>
              <div class="font-semibold">${v.name}</div>
              <div class="text-sm" style="color:var(--muted);">$ ${v.price.toLocaleString('es-AR')}</div>
            </div>
          </div>
        `;
        optList.appendChild(row);
      });

      // Selecci√≥n inicial
      currentVariant = data.variants[0];
      // Mostrar imagen (FALLBACK HERO + intento variante)
      setVmImage(family, currentVariant?.name || null);

      // Cambios de radio -> actualizar preview
      optList.querySelectorAll('input[name="variant"]').forEach((rad, idx)=>{
        rad.addEventListener('change', ()=>{
          currentVariant = data.variants[idx];
          setVmImage(family, currentVariant?.name || null);
        });
      });

      varModal.showModal();
    }

    // ========= CANTIDAD =========
    qtyMinus.addEventListener('click', ()=>{ currentQty = Math.max(1, currentQty-1); qtyEl.textContent = currentQty; });
    qtyPlus.addEventListener('click',  ()=>{ currentQty++; qtyEl.textContent = currentQty; });

    // ========= CARRITO / WHATSAPP (m√≠nimo) =========
    const CART = [];
    const cartCount = document.getElementById('cartCount');
    function recalc(){ cartCount.textContent = CART.reduce((a,b)=>a+b.qty,0); }

    addBtn.addEventListener('click',(e)=>{
      e.preventDefault();
      if(!currentVariant) return;
      CART.push({ fam: currentFamily, name: currentVariant.name, price: currentVariant.price, qty: currentQty });
      recalc();
      varModal.close();
    });

    document.getElementById('goWA').addEventListener('click', ()=>{
      if(CART.length===0){ alert('Tu carrito est√° vac√≠o'); return; }
      const lines = CART.map(i => `- ${i.qty}√ó ${i.name} (${i.fam}) ‚Äî $ ${(i.price*i.qty).toLocaleString('es-AR')}`);
      const msg = encodeURIComponent(['Pedido LADIS:', ...lines].join('\n'));
      window.location.href = `https://wa.me/543751562291?text=${msg}`;
    });

    // ========= FILTRO CATEGOR√çAS =========
    function applyCat(cat){
      document.querySelectorAll('[data-category]').forEach(el=>{
        const show = (cat==='todo' || el.dataset.category===cat);
        el.style.display = show ? '' : 'none';
      });
      document.querySelectorAll('nav .pill').forEach(p=>p.classList.remove('active'));
      document.querySelector(`nav .pill[data-cat="${cat}"]`)?.classList.add('active');
    }
    document.querySelectorAll('nav [data-cat]').forEach(b=> b.addEventListener('click', ()=> applyCat(b.getAttribute('data-cat')) ));
    applyCat('todo');
  </script>
</body>
</html>
